summary: File transfer program
git-url: https://github.com/cph6/zsync
web-url: https://zsync.moria.org.uk/
src-url: https://zsync.moria.org.uk/download/zsync-0.6.3.tar.bz2
src-sha: 293b6191821641d3ed6248206f8f9df0bf46e6ee2cf8b4dd97cfd1d5909edb9a
license: Artistic-2.0

bsystem: configure
binbstd: 1

ccflags: -Wno-incompatible-pointer-types

# http://ftp.tku.edu.tw/Linux/Gentoo/gentoo-portage/net-misc/zsync/files/zsync-0.6.2-musl-off_t-fix.patch
dep-upp: patch
dopatch: |
    patch -p1 <<EOF
    diff --git a/libzsync/sha1.h b/libzsync/sha1.h
    index 3946505..8840570 100644
    --- a/libzsync/sha1.h
    +++ b/libzsync/sha1.h
    @@ -11,9 +11,10 @@
     
     #include "config.h"
     
    -#ifdef HAVE_INTTYPES_H
    +#if defined(HAVE_INTTYPES_H) && defined(__GLIBC__)
     #include <inttypes.h>
     #else
    +#include <stdint.h>
     #include <sys/types.h>
     #endif
    EOF
