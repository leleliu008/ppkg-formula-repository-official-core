summary: Multiple Precision Integers and Rationals (fork of GMP)
git-url: https://github.com/wbhart/mpir
version: 3.0.0
license: GPL-3.0-or-later
dep-upp: yasm gm4 libtool texinfo
bsystem: autotools

prepare: |
    if [ "$TARGET_PLATFORM_ARCH" = 'x86' ] ; then
        cat > ../bin/m4 <<EOF
    #!/bin/sh
    exec "$M4" -DPIC "\$@"
    EOF
        chmod +x ../bin/m4

        export M4="$PWD/../bin/m4"
    fi

    if [ "$TARGET_PLATFORM_ARCH" = 'x86_64' ] ; then
        YASM="$(command -v yasm)"

        cat > ../bin/yasm <<EOF
    #!/bin/sh
    exec "$YASM" -D PIC "\$@"
    EOF
        chmod +x ../bin/yasm
    fi

install: |
    configure \
        --with-pic \
        --disable-profiling \
        --disable-assert \
        --disable-fat \
        --enable-cxx \
        --enable-fft \
        --enable-gmpcompat
